<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Loja de Prêmios - LevelUp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" th:href="@{/css/admin-layout.css}">
    <link rel="stylesheet" th:href="@{/css/shop.css}">
</head>
<body>

<div class="wrapper">
    <nav th:replace="~{fragments/sidebar :: sidebar}"></nav>

    <div id="content">
        <div class="container-fluid">

            <div class="d-flex justify-content-between align-items-center mb-5">
                <div>
                    <h2><i class="fa-solid fa-gift" style="color: var(--accent-orange);"></i> Rewards Shop</h2>
                    <p class="text-muted mb-0">Troque seus pontos por recompensas incríveis.</p>
                </div>

                <div class="balance-float">
                    <span>Seu Saldo:</span>
                    <span class="text-warning fs-5"><i class="fa-solid fa-gem me-1"></i> <span th:text="${user.currentBalance}">0</span></span>
                </div>
            </div>

            <ul class="nav nav-tabs border-secondary mb-4">
                <li class="nav-item">
                    <a class="nav-link active bg-transparent text-white border-0 border-bottom border-warning border-3" href="#">Catálogo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-muted hover-text-white" href="/shop/history">Meus Resgates</a>
                </li>
            </ul>

            <div class="shop-grid">
                <div class="product-card" th:each="item : ${products}">
                    <div class="stock-badge">
                        Estoque: <span th:text="${item.stockQuantity}">10</span>
                    </div>

                    <div class="product-icon-container">
                        <i class="fa-solid fa-gift"></i>
                    </div>

                    <h5 class="product-title" th:text="${item.name}">Nome do Item</h5>

                    <div class="product-price">
                        <i class="fa-solid fa-bolt text-warning"></i>
                        <span th:text="${item.pointCost}">500</span>
                    </div>

                    <button class="btn-buy"
                            th:disabled="${user.currentBalance < item.pointCost}"
                            th:text="${user.currentBalance < item.pointCost} ? 'Saldo Insuficiente' : 'Resgatar (App)'">
                        Resgatar
                    </button>
                </div>
            </div>

            <div th:if="${#lists.isEmpty(products)}" class="text-center py-5 text-muted">
                <i class="fa-solid fa-ghost fa-3x mb-3"></i>
                <p>A loja está vazia no momento. Volte mais tarde!</p>
            </div>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>